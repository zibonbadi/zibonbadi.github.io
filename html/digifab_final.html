<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Final Project: Creating a Mini PC case</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { font-weight: bold; } /* Alert */
    code span.an { font-style: italic; } /* Annotation */
    code span.cf { font-weight: bold; } /* ControlFlow */
    code span.co { font-style: italic; } /* Comment */
    code span.cv { font-style: italic; } /* CommentVar */
    code span.do { font-style: italic; } /* Documentation */
    code span.dt { text-decoration: underline; } /* DataType */
    code span.er { font-weight: bold; } /* Error */
    code span.in { font-style: italic; } /* Information */
    code span.kw { font-weight: bold; } /* Keyword */
    code span.pp { font-weight: bold; } /* Preprocessor */
    code span.wa { font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../styles/notes.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Final Project: Creating a Mini PC case</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#inspiration">Inspiration</a></li>
<li><a href="#design-goals-and-parts-list">Design goals and parts list</a></li>
<li><a href="#designing-the-case">Designing the case</a>
<ul>
<li><a href="#laser-cutting">Laser cutting</a></li>
<li><a href="#d-printing">3D printing</a></li>
</ul></li>
<li><a href="#electronics-wiring">Electronics wiring</a></li>
<li><a href="#microcontroller-programming">Microcontroller programming</a></li>
</ul>
</nav>
<p>This document will explain the creation of my final FabLab course project, a mini PC case featuring an old laptop motherboard with integrated electronics for measuring and displaying system temperature.</p>
<figure>
<video src="../download/pccasedemo.webm" controls=""><a href="../download/pccasedemo.webm">Showcase of the final PC case</a></video><figcaption aria-hidden="true">Showcase of the final PC case</figcaption>
</figure>
<p>All designs and components needed will be linked for download in their appropriate sections. For convenience, you can also get the direct references at the bottom of the document.</p>
<h2 id="inspiration">Inspiration</h2>
<figure>
<video src="../img/final/docvid.webm" controls=""><a href="../img/final/docvid.webm">Showcase of the (semi) final case</a></video><figcaption aria-hidden="true">Showcase of the (semi) final case<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></figcaption>
</figure>
<p>Alright, this is it. The final project. Countless possibilities when you can control everything from physical construction over electronics to microcontroller programming. But what do?</p>
<p>When I started this course, I did so with the intention of passing it having gained not only knowledge, but also a holding a physical object in my hands which I could use on a day-to-day basis.</p>
<p>I previously mentioned being a proud Linux user, a system that to this day gained a dedicated, but niche following among desktop computer users, mainly through word of mouth. Because of this, there are many reasons someone might “get into” Linux in the first place.</p>
<p>For me this reason was preserving old technology. As me and my family never had a lot of spare cash, I’ve learned to cherish any piece of precious (expensive) technology I manage to get hold of and use it until it’s absolutely not possible anymore, then fix it, then use it again, 20 GOTO 10. However, when I first installed Manjaro on my laptop I encountered two problems which even Linux wasn’t able to fix. Overheating (which can be mitigated, thanks to <code>thermald</code> and I haven’t had a thermal shutdown since ;p) and a case which was slowly falling apart.</p>
<p>Thus I decided to finally address these problems myself by building a custom case which warned me of overheating during runtime and allowed me to easily work on my laptop’s old mainboard if needed.</p>
<p>As everything design-wise originates from one Fusion 360 project, it’s download will be linked in this footnote<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<h2 id="design-goals-and-parts-list">Design goals and parts list</h2>
<p>The case I am trying to build will have to meet certain criteria, both for passing the course as well as for my own personal use case:</p>
<ul>
<li>The case requires fitting the following components inside - Mainboard - Power button - Audio/SD I/O PCB - <del>Activity light PCB</del> The activity light is integrated into the trackpad PCB and thus not usable in this case, hence it won’t be used.</li>
<li>The optical drive is optional but “nice to have”</li>
<li>A custom backplate suited towards the laptop’s I/O</li>
<li>A feet-based “floating” design to increase airflow at the bottom and reduce overheating</li>
<li>Strict separation between the case’s measurement electronics and the laptop’s components</li>
<li>An easy way to remove the laptop’s PCB and service it without taking apart the entire case</li>
<li>Ambient lighting at the bottom of the case to indicate activity in an aesthetically thought-out way.</li>
<li>A heat sensor for measuring the CPU temperature</li>
<li>A way to display the measured CPU temperature</li>
<li>A microcontroller for interfacing between the above mentioned components</li>
</ul>
<p>The final parts required to build this case ended up being the following:</p>
<ul>
<li>My Laptop. Duh.</li>
<li>3mm/8mm wood for the laser-cut</li>
<li>A roll of PLA for 3D-printing the stabilizing corner pieces</li>
<li>M3x16 case screws and M2.5 screws for the motherboard (as I am taking my laptop apart, it will supply these already)</li>
<li>M3-compatible feet</li>
<li>Cables solder and a Luster terminal for connecting the electronics</li>
<li>An Arduino Uno. I used a selfbuilt clone in the final case, but tested on an official one.</li>
<li>An MLX90614ESF infrared temperature sensor</li>
<li>A WS2812B-based programmable LED strip</li>
<li>A 1602A-compatible LCD character display</li>
<li>A Potentiometer and Button for controlling the LCD display’s properties (contrast, backlight)</li>
</ul>
<h2 id="designing-the-case">Designing the case</h2>
<h3 id="laser-cutting">Laser cutting</h3>
<p>For the walls I decided to use a combination of 8mm wood for the base frame, joints and certain base plates with 3mm plates screwed on top, as it allows easy customization and part mounting while facilitating airflow and potentially easier routing of cables. For joints I decided to connect all adjacent parts into one unified shape. While this might risk a looser cut when a wider kerf is appplied, this approach ensures full interconnectivity of the parts without computationally intensive constraints, such as colinearity.</p>
<p>All sketches have been designed parametrically using Autodesk Fusion 360 with some finishing touches being applied in LibreCAD. The final case ended up being 25cm × 25cm × 7cm of internal space, a quite generous measurement, as for a long time I didn’t have access to my laptop’s mainboard (as I needed to write this very doc on it):</p>
<figure>
<img src="../img/final/wood8r1.png" alt="8mm wood sketch in LibreCAD" /><figcaption aria-hidden="true">8mm wood sketch in LibreCAD<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></figcaption>
</figure>
<figure>
<img src="../img/final/wood3r1.png" alt="3mm wood sketch in LibreCAD" /><figcaption aria-hidden="true">3mm wood sketch in LibreCAD<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></figcaption>
</figure>
<p>As you may notice, the 3mm plates feature a lot of equally distributed 3mm holes. These serve two functions: On one hand they’re meant to allow heat to rise out of the top of the case, improving (or at least not hindering) system temperature. Second these holes are meant to serve as mounts for all measurement electronics, as it provides an easy method for having the entire top including all electronics to be independent of the rest of the case and easily removable for serviceability.</p>
<p>After exporting the case walls’ sketch into DXF format, I got it cut. Sadly I can’t show you the exact settings as I had to commission someone else to do it externally due to COVID-19 related restrictions.</p>
<p>After I received my parts however, I realized a few mistakes in the sketch: As you may see the top floor’s base plate (where the mainboard is supposed to be mounted) was nothing but a cutout and a frame (featuring incorrect joints on one side at that), so it had to be adjusted.</p>
<p>I also took some unlucky measurements around the front plate: from an earlier prototype based almost solely on 8mm plates I thought I had to make the potentiometer hole bigger, however I just found myself unable to mount it this way and additionally the LCD display’s hole was measured around incorrect dimensions. Once again, I adjusted this part.</p>
<p>Instead of spending another 3 days ripping my hair out at Fusion 360 refusing to work with the constraints I gave it, I decided to simplify my design (as the WS2812B was not usable) and make necessary customizations using a good old drill saw and file combo.</p>
<p>All recomissioned parts can be seen below:</p>
<figure>
<img src="../img/final/wood8r2.png" alt="8mm wood sketch in LibreCAD: R2" /><figcaption aria-hidden="true">8mm wood sketch in LibreCAD: R2<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></figcaption>
</figure>
<figure>
<img src="../img/final/wood3r2.png" alt="3mm wood sketch in LibreCAD: R2" /><figcaption aria-hidden="true">3mm wood sketch in LibreCAD: R2<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></figcaption>
</figure>
<h3 id="d-printing">3D printing</h3>
<p>Overall the case’s parts were designed to be mostly interchangeable, which applies particularly to the 3D printed parts of the case. Just for extra structure I decided that although the applied box joints provide plenty structure on their own, I was gonna 3D print some additional corner pieces to connect all wooden walls with screws.</p>
<p>Generally I designed three types of 3D printed ABS corner pieces:</p>
<ol type="1">
<li>Outer corners<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></li>
<li>Inner corners<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a><a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></li>
<li>Custom pieces (3to8 pieces)<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></li>
</ol>
<figure>
<img src="../img/final/curaparts.png" alt="All parts in Ultimaker Cura for show purposes" /><figcaption aria-hidden="true">All parts in Ultimaker Cura for show purposes</figcaption>
</figure>
<p>All parts were designed by first laying out a somewhat complex sketch which was then extruded multiple times to achieve a consistent 3D model in Fusion 360.</p>
<p>Just as with the laser cut wood, I am sadly unable to show you any settings as I had to commission the preparation 3D printing outside due to COVID-19.</p>
<p>After assembly I started to notice that the application of outer corners for mounting ended up being quite cumbersome and provided comparatively little structural support. Combined with the necessarily limited length of the screws used (M3x16mm), I decided to favor inner corner pieces over outer ones (although outer corners still needed to be applied for connecting the two main levels of the case).</p>
<h2 id="electronics-wiring">Electronics wiring</h2>
<p>The plan for the electronics seemed simple: Tap into the laptop’s power socket, adjust the power coming from it and let an old Arduino Uno run the measurement eqipment, with a 19V to 5V stepdown transformator to hook into the Arduino’s DC. However as you will read later, there were a few issues along the way. For now have this table with how everything was wired up logically:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Arduino pin</th>
<th>Component pin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+5V</td>
<td>1602A VSS; 1602A A (over resistor); Potentiometer 10KΩ</td>
</tr>
<tr class="even">
<td>GND</td>
<td>1602A VDD; 1602A RW; 1602A K; Potentiometer; MLX90614ESF GND, RGB Cathode (later), Reset button (even later)</td>
</tr>
<tr class="odd">
<td>RST</td>
<td>Reset button (later)</td>
</tr>
<tr class="even">
<td>+3.3V</td>
<td>MLX90614ESF VIN</td>
</tr>
<tr class="odd">
<td>A4</td>
<td>MLX90614ESF SDA</td>
</tr>
<tr class="even">
<td>A5</td>
<td>MLX90614ESF SCL</td>
</tr>
<tr class="odd">
<td>Digital 2</td>
<td>1602A D7</td>
</tr>
<tr class="even">
<td>Digital 3</td>
<td>1602A D6</td>
</tr>
<tr class="odd">
<td>Digital 4</td>
<td>1602A D5</td>
</tr>
<tr class="even">
<td>Digital 5</td>
<td>1602A D4</td>
</tr>
<tr class="odd">
<td>Digital 7</td>
<td>WS2812B (over resistor)</td>
</tr>
<tr class="even">
<td>Digital 9</td>
<td>RGB red (later)</td>
</tr>
<tr class="odd">
<td>Digital 10</td>
<td>RGB green (later)</td>
</tr>
<tr class="even">
<td>Digital 11</td>
<td>RGB blue (later)</td>
</tr>
<tr class="odd">
<td>Digital 12</td>
<td>1602A E</td>
</tr>
<tr class="even">
<td>Digital 13</td>
<td>1602A RS</td>
</tr>
</tbody>
</table>
<p>Additionally I wired the potentiometer’s output pin to the 1602A’s VO (contrast) pin, as well as a button inbetween the 1602A’s anode and the resistor applied to VCC beforehand.</p>
<figure>
<img src="../img/final/wiring.JPG" alt="Removed top of the case showing the final electronic wiring" /><figcaption aria-hidden="true">Removed top of the case showing the final electronic wiring</figcaption>
</figure>
<p>First issue was the MLX90614ESF: As the Arduino I used was <em>not</em> an original, the PCB didn’t expose a 3V3 pin. Although it sounds like a non-issue in hindsight, it took quite a while to find out that the sensor actually supported being run over 5V, although less precisely so. However as I am building a PC case rather than using it medically, this restricion won’t matter all too much.</p>
<p>Additionally I wasn’t able to use the WS2812B light strip as it had too large of a power draw to be used in conjunction with the MLX90614ESF <em>and</em> the 1602A. As a solution I used a regular 4-pin RGB LED and reprogrammed the Arduino accordingly.</p>
<h2 id="microcontroller-programming">Microcontroller programming</h2>
<p>As the parts used are fairly common among Arduino hobbyists, the source code<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> ended up rather simple, given you install the <code>LiquidCrystal</code> and <code>Adafruit MLX90614</code> libraries. One thing to note here is that PC temperature sensors usually bump their reports by 20°C, likely due to how long it takes a heat sink to dissipate the heat given to it.:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// include the library code:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;LiquidCrystal.h&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Adafruit_MLX90614.h&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define RED 9</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#define GREEN 10</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#define BLUE 11</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">//Define custom characters</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>byte temp[<span class="dv">8</span>] = {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00100</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10110</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="bn">0b11110</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>};</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>byte fan[<span class="dv">8</span>] = {</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00000</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00110</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01001</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00110</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01001</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00001</span>,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="bn">0b11110</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00000</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>};</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>byte ambient[<span class="dv">8</span>] = {</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00000</span>,</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00000</span>,</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01110</span>,</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10001</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10101</span>,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10001</span>,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01110</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00000</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>};</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>byte fire[<span class="dv">8</span>] = {</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="bn">0b00001</span>,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10100</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01100</span>,</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01110</span>,</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="bn">0b11011</span>,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10001</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="bn">0b11001</span>,</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="bn">0b01111</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>};</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="co">// Init LCD display. Parameters: (rs, enable, d4, d5, d6, d7)</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>LiquidCrystal lcd(<span class="dv">13</span>, <span class="dv">12</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>);</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co">//Init MLX temp sensor</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>Adafruit_MLX90614 mlx = Adafruit_MLX90614();</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">int</span> milicounter = <span class="dv">0</span>;</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup() </span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>  <span class="co">// display dimensions (16x2)</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>  lcd.begin(<span class="dv">16</span>, <span class="dv">2</span>);</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>  mlx.begin();</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  pinMode(RED, OUTPUT);</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  pinMode(GREEN, OUTPUT);</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  pinMode(BLUE, OUTPUT);</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>  <span class="co">// dejunkification</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>  lcd.clear();</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="co">//load custom characters into the LCD&#39;s RAM</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  lcd.createChar(<span class="dv">0</span>, temp);</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  lcd.createChar(<span class="dv">1</span>, ambient);</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  lcd.createChar(<span class="dv">2</span>, fire);</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  lcd.createChar(<span class="dv">3</span>, fan);</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop() </span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>  milicounter = (milicounter+<span class="dv">1</span>)%<span class="dv">1000</span>;</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>  <span class="co">//CPU temperature is usually bumped by 20°C in statistics. This is likely a factor compensating for different heatsinks</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> objTemp = mlx.readObjectTempC()+<span class="fl">20.0</span><span class="bu">f</span>;</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>  <span class="dt">float</span> ambientTemp = mlx.readAmbientTempC();</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  <span class="dt">static</span> byte r=<span class="dv">255</span>,g=<span class="dv">255</span>,b=<span class="dv">255</span>;</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Color calc</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(objTemp &gt;= <span class="fl">40.0</span><span class="bu">f</span>){ r=<span class="dv">0</span>; g=<span class="dv">255</span>; b=<span class="dv">255</span>; }</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(objTemp &gt;= <span class="fl">50.0</span><span class="bu">f</span>){ r=<span class="dv">0</span>; g=<span class="dv">127</span>; b=<span class="dv">255</span>; }</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(objTemp &gt;= <span class="fl">60.0</span><span class="bu">f</span>){ r=<span class="dv">255</span>; g=<span class="dv">127</span>; b=<span class="dv">0</span>; }</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(objTemp &gt;= <span class="fl">70.0</span><span class="bu">f</span>){ r=<span class="dv">255</span>; g=<span class="dv">63</span>; b=<span class="dv">0</span>; }</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(objTemp &gt;= <span class="fl">80.0</span><span class="bu">f</span>){ r=<span class="dv">255</span>; g=<span class="dv">0</span>; b=<span class="dv">0</span>; }</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>  <span class="co">/*</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="co">   *  Output</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="co">   */</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Buffer clear</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>  lcd.setCursor(<span class="dv">0</span>, <span class="dv">0</span>);</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>  lcd.print(<span class="st">&quot;                &quot;</span>);</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>  lcd.setCursor(<span class="dv">0</span>, <span class="dv">1</span>);</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>  lcd.print(<span class="st">&quot;                &quot;</span>);</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Icons</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>  <span class="co">//temp</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>  lcd.setCursor(<span class="dv">0</span>, <span class="dv">0</span>);</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>  lcd.write(byte(<span class="dv">0</span>));</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>  lcd.print(objTemp);</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>  <span class="co">//ambient</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>  lcd.setCursor(<span class="dv">0</span>, <span class="dv">1</span>);</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>  lcd.write(byte(<span class="dv">1</span>));</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>  lcd.print(ambientTemp);</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>  <span class="co">//fire</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>  lcd.setCursor(<span class="dv">14</span>-<span class="dv">4</span>, <span class="dv">0</span>);</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>  lcd.print(<span class="st">&quot;1000 &quot;</span>);</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>  lcd.write(byte(<span class="dv">3</span>));</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Display colors</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>  analogWrite(RED,r);</span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>  analogWrite(GREEN,g);</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>  analogWrite(BLUE,b);</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><a href="../img/final/docvid.webm">Showcase video download</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p><a href="../download/final/pccases.f3d">Fusion 360 project</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><a href="../download/final/8mmr1.dxf">8mm sketch R1</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p><a href="../download/final/3mmr1.dxf">3mm sketch R1</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p><a href="../download/final/8mmr2.dxf">8mm sketch R2</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p><a href="../download/final/3mmr2.dxf">3mm sketch R2</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p><a href="../download/final/3plate.stl">3plate outer corner piece</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p><a href="../download/final/corner2o_long.stl">corner2o_long outer corner piece</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9" role="doc-endnote"><p><a href="../download/final/corner2i.stl">corner3i inner corner piece</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10" role="doc-endnote"><p><a href="../download/final/corner3i.stl">corner3i inner corner piece</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11" role="doc-endnote"><p><a href="../download/final/3to8_r.stl">3to8r custom piece</a><a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12" role="doc-endnote"><p><a href="../download/final/3to8_l.stl">3to8l custom piece</a><a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13" role="doc-endnote"><p><a href="../src/lcdtemp/lcdtemp.ino">Arduino project</a><a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
